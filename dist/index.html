<!DOCTYPE html><!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]--><!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]--><!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]--><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
          
          
          
          
          
          
    <title></title>
  <style>.ss-centering{position:relative;margin-left:auto;margin-right:auto;width:56.25vh;height:100vh}.ss-container{position:absolute;top:0;left:0;width:100%;height:100%}.ss-slide{position:absolute;width:100%;height:100%;top:0;left:0;text-align:center}.ss-down-arrow-container{position:absolute;overflow:hidden;margin:0;padding:0}img.ss-down-arrow{position:absolute;position:relative;top:0;left:0;width:100%}.ss-0-0{top:0;left:0}.ss-0-1{top:100%;left:0}.ss-0-2{top:200%;left:0}.ss-0-3{top:300%;left:0}.ss-0-4{top:400%;left:0}.ss-0-5{top:500%;left:0}.ss-0-6{top:600%;left:0}.ss-0-7{top:700%;left:0}.ss-0-8{top:800%;left:0}.ss-0-9{top:900%;left:0}.ss-0-10{top:1000%;left:0}.ss-0-11{top:1100%;left:0}.ss-0-12{top:1200%;left:0}.ss-0-13{top:1300%;left:0}.ss-0-14{top:1400%;left:0}.ss-0-15{top:1500%;left:0}.ss-0-16{top:1600%;left:0}.ss-0-17{top:1700%;left:0}.ss-0-18{top:1800%;left:0}.ss-0-19{top:1900%;left:0}.ss-0-20{top:2000%;left:0}body{margin:0;padding:0;height:100%;overflow:hidden;background-color:#0B1635}.ldl-ss-page{font-family:Arial,"Microsoft YaHei","微软雅黑",sans-serif}.ldl-ss-text-orange{color:#FF7E00}.slide-0 svg{position:absolute;left:0;right:0;top:0;bottom:0}.slide-0-frame{width:98%;height:98%;margin-top:1%;margin-bottom:1%}.slide-1.slide-1-text{font-size:1.2em;color:#fff;text-align:left;position:absolute;top:70%;left:10%}.slide-1-text-1,.slide-1-text-2 div{margin-bottom:.3em}.slide-1-text-1,.slide-1-text-2{opacity:0}.slide-1-sky{position:absolute;width:90%;left:105%}.slide-1-foot{position:absolute;width:56.4%;top:20%;left:-60%}.slide-2{background-color:#0B1635}.slide-2.slide-2-text div{margin-bottom:.2em}.slide-2.slide-2-text div span{margin:.3em}.slide-2.slide-2-text{opacity:0;font-size:1.2em;color:#fff;text-align:left;position:absolute;top:70%;left:10%}.slide-2-orange{color:#FF7E00}.slide-2 .slide-2-earth{position:absolute;top:10%;left:5%;width:90%}.slide-2 .slide-2-girl{position:absolute;top:12%;left:150%;width:11.4%}.slide-2 .slide-2-superman{position:absolute;top:19%;left:150%;width:15.6%}.slide-3 svg{position:absolute;top:0;left:0;right:0;bottom:0}.slide-4{background-color:#0B1635}.slide-4 svg{position:absolute;top:0;left:0;right:0;bottom:0}</style></head>
  <body>

    <div class="ss-centering">
      <div id="main" class="ss-container">
          <div id="slide-0" class="ldl-ss-page ss-slide ss-0-0 slide-0">
  <img class="slide-0-frame" src="slides/slide-0/frame.png">
  <svg id="slide-0-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1600">
    <image x="0" y="0" width="900" height="900" xlink:href="slides/slide-0/background.png"></image>

    <image id="slide-0-logo" opacity="1.0" x="210" y="900" width="480" height="150" xlink:href="slides/slide-0/happy-new-year.png"></image>

    <image id="slide-0-logo" opacity="1.0" x="279" y="1150" width="342" height="90" xlink:href="slides/slide-0/logo.png"></image>

    <g id="slide-0-stars"></g>
    <g id="slide-0-text" transform="translate(-600, 550)">
      <text fill="white" font-size="86px" font-family="ldl-ss" transform="matrix(1, -0.2, 0, 1, 0, 0)">
        我的运动旅程
      </text>
    </g>
  </svg>
</div>

          <div id="slide-1" class="ldl-ss-page ss-slide ss-0-1 slide-1">

  <svg id="slide-1-svg" xmlns="http://www.w3.org/2000/svg" viewBox="-450 0 900 1600">

    <g id="slide-1-imgs"></g>

    <g>
      <g id="slide-1-text" transform="translate(-400,1050)" font-size="56px" fill="white">

        <text class="ldl-date" x="0" y="-100" font-size="76px" fill="#FF7E00">
          <tspan id="slide-1-year">2000</tspan><tspan>年</tspan><tspan id="slide-1-month">01</tspan><tspan>月</tspan><tspan id="slide-1-day">01</tspan><tspan>日</tspan>
        </text>

        <g id="slide-1-text-0" opacity="0.0">
          <!-- <text class="ldl-date" x="0" y="-100" font-size="76px" fill="#FF7E00">Date</text> -->
          <text x="0" y="0">我开始使用乐动力</text>
          <text x="0" y="100">走出了历史性的第一步！</text>
        </g>
        <g id="slide-1-text-1" opacity="0.0">
          <!-- <text class="ldl-date" x="0" y="-100" font-size="76px" fill="#FF7E00">Date</text> -->
          <text x="0" y="0">第一次走到<tspan fill="#FF7E00"> 10 </tspan>万步</text>
          <text x="0" y="100">相当于绕香港岛一圈</text>
        </g>
        <g id="slide-1-text-2" opacity="0.0">
          <!-- <text class="ldl-date" x="0" y="-100" font-size="76px" fill="#FF7E00">Date</text> -->
          <text x="0" y="0">第一次走到<tspan fill="#FF7E00"> 100 </tspan>万步</text>
          <text x="0" y="100">相当于奥特曼追到小怪兽的距离</text>
        </g>
      </g>
    </g>

  </svg>
</div>

          <div id="slide-2" class="ldl-ss-page ss-slide ss-0-2 slide-2">
  <svg viewBox="0 0 900 1600">

    <g id="slide-2-images"></g>

    <g id="slide-2-text" font-size="54px" fill="white" transform="translate(50, 900)" opacity="0.0">
      <text x="0" y="0" font-size="78px" fill="#FF7E00" id="slide-2-firstday"></text>
      <text x="0" y="100">第一次使用乐动力跑步功能</text>
      <text x="0" y="200">飞奔了<tspan font-size="76px" fill="#FF7E00" id="slide-2-firstday-running"></tspan>m
      </text>
    </g>

  </svg>
</div>

          <div id="slide-3" class="ldl-ss-page ss-slide ss-0-3 slide-3">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1600">
    <image x="0" y="0" width="900" height="900" xlink:href="slides/slide-3/background.png"></image>
    <g id="slide-3-self-photo"></g>
    <g id="slide-3-friend-photos"></g>
    <g id="slide-3-text" transform="translate(50, 950)">
      <g id="slide-3-text-summary" opacity="0.0">
        <text x="0" y="0" fill="white" font-size="50px">
          共与<tspan fill="#FF7E00" id="slide-3-friends-count">N</tspan>个好友产生纯洁的运动友谊
        </text>
        <text x="0" y="100" fill="white" font-size="50px">
          我的运动量在我的好友排行中第<tspan fill="#FF7E00" id="slide-3-friends-rank">m</tspan>名
        </text>
      </g>
      <g id="slide-3-text-yuepao" opacity="0.0">
        <image x="0" y="160" width="768" height="82" xlink:href="slides/slide-3/yuepao-text.png"></image>
      </g>
    </g>
  </svg>
</div>

          <div id="slide-4" class="ss-slide ss-0-4 slide-4">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1600">
    <g id="slide-4-text-pct" transform="translate(450, 420)">
      <text x="0" y="0" font-size="36px" font-family="Arial" text-anchor="middle" fill="white" id="slide-4-complete-rate">00%</text>
    </g>
    <g>
      <polygon transform="translate(450, 410) scale(80)" fill="none" stroke="white" stroke-width="0.10" stroke-linecap="round" points="1.0,0.0 0.5,0.866025403784 -0.5,0.866025403784 -1.0,1.22464679915e-16 -0.5,-0.866025403784 0.5,-0.866025403784"></polygon>
    </g>

    <g id="slide-4-bg-arcs"></g>
    <g id="slide-4-fg-arcs"></g>

    <g id="slide-4-text-summary" opacity="0.0" transform="translate(50, 950)">
      <text x="0" y="0" fill="white" font-size="56px">有<tspan font-size="78px" fill="#FF7E00" id="slide-4-complete-days"> N </tspan>天完成目标，</text>
      <text x="0" y="160" fill="#FF7E00" font-family="ldl-ss" font-size="70px">离人生巅峰还有一定距离！</text>
    </g>
  </svg>
</div>

          <div id="slide-5" class="ldl-ss-page ss-slide ss-0-5 slide-5">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1600">
    <g>
      <defs>
        <clippath id="slide-5-bright-map-clip">
          <rect x="0" y="0" width="100" height="900"></rect>
        </clippath>
      </defs>

      <image x="0" y="0" width="900" height="900" xlink:href="slides/slide-5/dark-map.png"></image>

      <image x="0" y="0" width="900" height="900" xlink:href="slides/slide-5/bright-map.png" clip-path="url(#slide-5-bright-map-clip)"></image>
    </g>

    <g id="slide-5-rank-circle" transform="translate(700,600) scale(0.0)">
      <g transform="translate(-156, -156)">
        <image x="0" y="0" width="312" height="312" xlink:href="slides/slide-5/circle.png"></image>
        <text x="110" y="120" font-size="48" fill="white">超过</text>
        <text x="80" y="220" font-size="80" fill="white" id="slide-5-better-than-pct">  %</text>
      </g>
    </g>

    <g>
      <text x="50" y="112" opacity="1.0" fill="white" font-size="56">
        我一共走了 <tspan fill="#FF7E00" font-size="78px">
          <tspan id="slide-5-total-steps">0</tspan>
          <tspan> 步</tspan></tspan>
      </text>
      <text x="50" y="208" opacity="1.0" fill="white" font-size="56">
        日均 <tspan fill="#FF7E00" font-size="78px">
          <tspan id="slide-5-avg-steps">0</tspan>
          <tspan> 步</tspan></tspan>
      </text>
    </g>

    <g opacity="1.0" transform="translate(450 1050)">
      <text x="-400" y="-140" fill="red" font-size="54px">
        可以当之无愧的称自己为
      </text>

      <g transform="translate(-320, 0)">
        <image x="-72" y="-90" width="144" height="180" xlink:href="slides/slide-5/bracket-left.png"></image>
      </g>

      <g transform="translate(320, 0)">
        <image x="-72" y="-90" width="144" height="180" xlink:href="slides/slide-5/bracket-right.png"></image>
      </g>

      <g transform="scale(0.0)" id="slide-5-call-me-0">
        <image x="-187.5" y="-43.5" width="375" height="87" xlink:href="slides/slide-5/运动女神.png"></image>
      </g>

      <g transform="scale(0.0)" id="slide-5-call-me-1">
        <image x="-187.5" y="-43.5" width="375" height="87" xlink:href="slides/slide-5/运动男神.png"></image>
      </g>

      <g transform="scale(0.0)" id="slide-5-call-me-2">
        <image x="-284.5" y="-43.5" width="569" height="87" xlink:href="slides/slide-5/运动界的范爷.png"></image>
      </g>

      <g transform="scale(0.0)" id="slide-5-call-me-3">
        <image x="-332.5" y="-43.5" width="665" height="87" xlink:href="slides/slide-5/运动界的钢铁侠.png"></image>
      </g>

      <g transform="scale(0.0)" id="slide-5-call-me-4">
        <image x="-236" y="-43.5" width="472" height="87" xlink:href="slides/slide-5/运动白富美.png"></image>
      </g>

      <g transform="scale(0.0)" id="slide-5-call-me-5">
        <image x="-235" y="-43.5" width="470" height="87" xlink:href="slides/slide-5/运动高富帅.png"></image>
      </g>

    </g>

    <g opacity="1.0">
      <g id="slide-5-share-btn" transform="translate(450, 1250)">

        <rect fill="#FF7E00" x="-225" y="-45" width="450" height="120" rx="20" ry="20"></rect>

        <text x="0" y="30" font-size="50px" font-family="Arial" fill="white" text-anchor="middle">去分享</text>

        <image x="-261" y="100" width="522" height="144" xlink:href="slides/slide-5/ldl-happy-new-year.png"></image>

      </g>
    </g>

    <g transform="translate(810, 400)">
      <g transform="scale(0.0)" id="slide-5-firework-small">
        <image x="-72" y="-72" width="144" height="144" xlink:href="slides/slide-5/firework-small.png"></image>
      </g>
    </g>

    <g transform="translate(110, 780)">
      <g transform="scale(0.0)" id="slide-5-firework-large">
        <image x="-90" y="-90" width="180" height="180" xlink:href="slides/slide-5/firework-large.png"></image>
      </g>
    </g>

  </svg>
</div>

      </div>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script>
    <script src="//zeptojs.com/zepto.min.js"></script>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="//cdn.jsdelivr.net/velocity/1.1.0/velocity.min.js"></script>

    
    
    

    
    

        
        
        
        
        
        

    
  

<script>function rgb2hex(t){return t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function rgbToHex(t,e,n){return rgb2hex([null,t,e,n])}function getWindowSize(){var t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0],a=t.innerWidth||n.clientWidth||i.clientWidth,r=t.innerHeight||n.clientHeight||i.clientHeight;return[a,r]}function parseURL(t){var e=document.createElement("a");return e.href=t||location&&location.href,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t,n={},i=e.search.replace(/^\?/,"").split("&"),a=i.length,r=0;a>r;r++)i[r]&&(t=i[r].split("="),n[t[0]]=t[1]);return n}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}function throttle(t,e,n){e||(e=250);var i,a;return function(){var r=n||this,o=+new Date,s=arguments;i&&i+e>o?(clearTimeout(a),a=setTimeout(function(){i=o,t.apply(r,s)},e)):(i=o,t.apply(r,s))}}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}!function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),a=window.setTimeout(function(){e(n+i)},i);return t=n+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),!function(t){function e(){var t=arguments[0],n=e.cache;return n[t]&&n.hasOwnProperty(t)||(n[t]=e.parse(t)),e.format.call(null,n[t],arguments)}function n(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function i(t,e){return Array(e+1).join(t)}var a={not_string:/[^s]/,number:/[dief]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fiosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};e.format=function(t,r){var o,s,l,u,c,d,h,f=1,p=t.length,m="",g=[],x=!0,y="";for(s=0;p>s;s++)if(m=n(t[s]),"string"===m)g[g.length]=t[s];else if("array"===m){if(u=t[s],u[2])for(o=r[f],l=0;l<u[2].length;l++){if(!o.hasOwnProperty(u[2][l]))throw new Error(e("[sprintf] property '%s' does not exist",u[2][l]));o=o[u[2][l]]}else o=u[1]?r[u[1]]:r[f++];if("function"==n(o)&&(o=o()),a.not_string.test(u[8])&&"number"!=n(o)&&isNaN(o))throw new TypeError(e("[sprintf] expecting number but found %s",n(o)));switch(a.number.test(u[8])&&(x=o>=0),u[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":case"i":o=parseInt(o,10);break;case"e":o=u[7]?o.toExponential(u[7]):o.toExponential();break;case"f":o=u[7]?parseFloat(o).toFixed(u[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&u[7]?o.substring(0,u[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}!a.number.test(u[8])||x&&!u[3]?y="":(y=x?"+":"-",o=o.toString().replace(a.sign,"")),d=u[4]?"0"===u[4]?"0":u[4].charAt(1):" ",h=u[6]-(y+o).length,c=u[6]&&h>0?i(d,h):"",g[g.length]=u[5]?y+o+c:"0"===d?y+c+o:c+y+o}return g.join("")},e.cache={},e.parse=function(t){for(var e=t,n=[],i=[],r=0;e;){if(null!==(n=a.text.exec(e)))i[i.length]=n[0];else if(null!==(n=a.modulo.exec(e)))i[i.length]="%";else{if(null===(n=a.placeholder.exec(e)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){r|=1;var o=[],s=n[2],l=[];if(null===(l=a.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o[o.length]=l[1];""!==(s=s.substring(l[0].length));)if(null!==(l=a.key_access.exec(s)))o[o.length]=l[1];else{if(null===(l=a.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");o[o.length]=l[1]}n[2]=o}else r|=2;if(3===r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i[i.length]=n}e=e.substring(n[0].length)}return i};var r=function(t,n,i){return i=(n||[]).slice(0),i.splice(0,0,t),e.apply(null,i)};"undefined"!=typeof exports?(exports.sprintf=e,exports.vsprintf=r):(t.sprintf=e,t.vsprintf=r,"function"==typeof define&&define.amd&&define(function(){return{sprintf:e,vsprintf:r}}))}("undefined"==typeof window?this:window),function(t){function e(t,e,n,i){var a=window.$;a.ajax({type:"GET",url:t,data:n,dataType:e,success:function(t){i(null,t)},error:function(e,a){i({message:"Can not get "+t+" :(",url:t,params:n,type:a,xhr:e})}})}function n(t){var e=t.split("-");return{year:e[0],month:e[1],day:e[2]}}function i(t){return t.ret.completegoalrate=Math.round(100*(t.ret.completegoalday/t.ret.lifetime)),t.ret.firstday_parsed=n(t.ret.firstday),t.ret.dt_10w_parsed=n(t.ret.dt_10w),t.ret.dt_100w_parsed=n(t.ret.dt_100w),t}function a(t,n){var a,r,l={},u=function(t,e){t&&n(t,e),n(null,i(e))};!t||o.USE_MOCK?u(null,s):(a=o.DEV_PATH,/^prod/i.test(o.CONFIG_GROUP)&&(a=o.PROD_PATH),r=o.ENDPOINT+a,l.action="getannualdata",l.uid=t,e(r,"jsonp",l,function(t,e){t||!e||"OK"!==e.status?u(null,s):u(null,e)}))}var r="",o={ENDPOINT:"http://core.api.ledongli.cn:8090",DEV_PATH:"/han_nearline.api",PROD_PATH:"/han.api",CONFIG_GROUP:"dev",USE_MOCK:!1,MOCK_STATUS:"OK"};/github/.test(location.href)&&(r="http://lge88.github.io/ldl-event-slideshow");var s={status:"OK",uid:null,ret:{dt_10w:"2013-06-28",firstday_running_steps:1e3,accumulativesteps:4160136,dt_100w:"2013-06-29",completegoalday:279,averagesteps:11243,dailystatsday:370,firstday:"2013-04-15",completegoalrate:"0%",avatar_url:"http://tp4.sinaimg.cn/1967427891/180/5656156315/0",running_firstday:"0",rank:181625,friendsinfo:{friendsrank:5,friendslist:[{avatar_url:"http://files.ledongli.cn/avatar/11779431.jpg"},{avatar_url:"http://qzapp.qlogo.cn/qzapp/100481185/DEB1A64DE4DCBED7282D145868AAAB44/100"},{avatar_url:"http://tp1.sinaimg.cn/1718274124/180/5703054401/0"},{avatar_url:"http://qzapp.qlogo.cn/qzapp/100481185/5FAD852F620FFA5059CBEAF3A8E02BCC/100"},{avatar_url:"http://files.ledongli.cn/avatar/4148131.jpg"}],friends_count:7},lifetime:619,better_than_pct:"99%",gender:"female"},errorCode:0,error:null,path:null};o.getAnnualUserData=a,t.LDLAPI=o}(window),function(t){function e(t,e,n){return r(t,e,n)}function n(t,e,n){e||(e=250);var i,a;return function(){var r=n||this,o=+new Date,s=arguments;i&&i+e>o?(clearTimeout(a),a=setTimeout(function(){i=o,t.apply(r,s)},e)):(i=o,t.apply(r,s))}}function i(t){var e=t||{},n=e.domEl,i="function"==typeof e.shouldCreate?e.shouldCreate:function(){return!0},a="function"==typeof e.onCreate?e.onCreate:o,r="function"==typeof e.onEnter?e.onEnter:o,s="function"==typeof e.onExit?e.onExit:o,l=e.context;if(!n)throw new Error("Can not initialize Slide without provide DOM element!");this.domEl="string"==typeof n?document.getElementById(n):n,this.context=l,this.onEnter=r.bind(this),this.onExit=s.bind(this),this.onCreate=a.bind(this),this.shouldCreate=i.bind(this)}function a(t,i){function r(){N=-1,W=-1,Y=0,$=0}function o(){return O.clientHeight}function s(t){O.style.top=t+"px"}function l(){return O.getBoundingClientRect().top}function u(t,e){var n,i,r=o(),s=e/r;return n=s>=a.START_SCROLL_THRESHOLD?1:s<=-a.START_SCROLL_THRESHOLD?-1:0,i=t-n,i>=L?L:0>=i?0:i}function c(t){var e=o();return-t*e}function d(t){console.log(t),t.preventDefault(),H||(N=t.clientX,W=t.clientY,Y=l(),console.log("startContainerTop = ",Y),O.addEventListener("mousemove",F),t.stopPropagation())}function h(t){t.preventDefault(),H||($=t.clientY-W,s(Y+$),t.stopPropagation())}function f(t){if(t.preventDefault(),!H){O.removeEventListener("mousemove",F);var e=u(R,$);p(e),r(),t.stopPropagation()}}function p(t,n){var i=R,a=c(t),r=n||{},o=r.animate===!1?!1:!0;return H=!0,R===t?void e(O,{top:a},{complete:function(){H=!1}}):(R=t,void(o?e(O,{top:a},{complete:function(){E(i),A(R),H=!1}}):(s(a),E(i),A(R),H=!1)))}function m(){L>R&&p(R+1)}function g(t){if(t.target.__onclick)return void t.target.__onclick(t);if(t.preventDefault(),!H){O.removeEventListener("mousemove",F);var e=u(R,$);p(e),r(),t.stopPropagation()}}function x(t){t.preventDefault(),H||(N=t.touches[0].clientX,W=t.touches[0].clientY,Y=l(),O.addEventListener("touchmove",M),t.stopPropagation())}function y(t){t.preventDefault(),H||($=t.touches[0].clientY-W,s(Y+$),t.stopPropagation())}function v(t){if(t.target.__onclick)return void t.target.__onclick(t);if(t.preventDefault(),!H){O.removeEventListener("touchmove",M);var e=u(R,$);p(e),r(),t.stopPropagation()}}function w(t){if(t.preventDefault(),!H){O.removeEventListener("touchmove",M);var e=u(R,$);p(e),r(),t.stopPropagation()}}function A(t){var e=I.slides[t];e&&e.onEnter&&e.onEnter()}function E(t){var e=I.slides[t];e&&e.onExit&&e.onExit()}function D(){A(R)}function _(){H=!1}function b(){return O.getBoundingClientRect().width}function T(){return O.getBoundingClientRect().height}function S(){B||k();var t=B,e=b(),n=T(),i=I.arrowW,a=.88*n+n*R+"px";t.style.top=a,t.style.left=.5*e-.5*i+"px",B.style.display=""}function k(){var t=document.createElement("div"),e=document.createElement("img"),n=(b(),T(),I.arrowW);t.style.width=n+"px",t.style.height=n/72*102+"px",t.style.display="none",t.className="ss-down-arrow-container",e.src="lib/ss-arrow.gif",e.className="ss-down-arrow",e.__onclick=m,t.appendChild(e),O.appendChild(t),B=t}function C(){P.forEach(function(t){t.ss=I})}var I=this,O=t||document.body,P=Array.isArray(i)?i:[],R=0,L=P.length-1,H=!1,F=n(h,a.MOVE_EVENTS_INTERVAL_THRESHOLD),M=n(y,a.MOVE_EVENTS_INTERVAL_THRESHOLD),N=-1,W=-1,Y=0,$=0;I.arrowW=30,document.addEventListener("mousedown",d),document.addEventListener("mouseup",g),document.addEventListener("mouseout",f),document.addEventListener("touchstart",x),document.addEventListener("touchend",v),document.addEventListener("touchcancel",w);var B=null;return C(),I.start=D,I.slides=P,I.gotoSlide=p,I.unblockUserInteraction=_,I.showArrowButton=S,I}var r=(window.$,window.$.Velocity),o=(window.getWindowSize,function(){});a.START_SCROLL_THRESHOLD=.05,a.MOVE_EVENTS_INTERVAL_THRESHOLD=20,t.Slide=i,t.SlideShow=a}(window);var app={$:window.$,d3:window.d3,uuid:window.uuid,compile:function(t){return Handlebars.compile(t)},slidesByName:{},mainEl:document.getElementById("main"),addSlide:function(t,e){var n,i,a,r=e||{};return i=this.config&&this.config[t]||{},e&&e.context&&Object.keys(e.context).forEach(function(t){i[t]=e.context[t]}),r.context=i,r.domEl=t,n=parseURL(location.href).params,parseInt(n.index)===i.index&&Object.keys(n).forEach(function(t){var e;"index"!==t&&(e=n[t],i[t]=e)}),a=new Slide(r),this.slidesByName[t]=a,a},bootstrap:function(){var t=this.slidesByName,e=Object.keys(t).map(function(e){return t[e]}),n=parseURL(location.href).params,i=this;e.sort(function(t,e){return t.context.index-e.context.index}),i.ss=new SlideShow(i.mainEl,e),i.ss.slides[0].onCreate(),LDLAPI.getAnnualUserData(n.uid,function(t,e){!t&&e&&e.ret||(e=i.mockData),app.userData=e.ret;var n=i.ss;n.slides.forEach(function(t){t.context.userData=e.ret}),n.slides=n.slides.filter(function(t){return t.shouldCreate()}),n.slides.forEach(function(t,e){var n,i=t.context,a=app.$(t.domEl),r="ss-"+i.posX+"-"+i.posY;i.index=e,i.posY=e,n="ss-"+i.posX+"-"+i.posY,a.removeClass(r).addClass(n)}),n.slides.forEach(function(t,e){0!==e&&t.onCreate()})}),i.ss.start(),n.index&&setTimeout(function(){i.ss.gotoSlide(parseInt(n.index),{animate:!1})},100)}};!function(){function t(t,e,n){function i(){var l=e[s];if("function"==typeof l)l(t,function(t){return t?void n(t):(++s,void i())});else if(Array.isArray(l))for(r=l.length,o=0,a=0,a=0;r>a;++a)l[a](t,function(t){return t?void n(t):(o+=1,void(o===r&&(++s,i())))});else n(null,t)}var a,r,o,s=0;i()}function e(t,e,n){app.d3.select(t).transition().duration(e).attr("opacity",1).each("end",n)}function n(t,e,n){app.d3.select(t).transition().duration(e).attr("opacity",0).each("end",n)}function i(t,n){return function(i,a){e(t,n,function(){a()})}}function a(t,e){return function(i,a){n(t,e,function(){a()})}}function r(t){return function(e,n){setTimeout(function(){n()},t)}}function o(t){var e,n=t.split("/"),i=n[n.length-1],a=i.split(".");return a?(e=a[0].split("-"),{width:parseInt(e[e.length-2]),height:parseInt(e[e.length-1]),name:e.slice(0,-2).join("-"),ext:a[1]}):{}}function s(t,e,n){var i=o(e),a=i.width,r=i.height,s=n||"",l=app.d3.select(t);l.attr("xlink:href",e).attr("id",s+i.name).attr("width",a).attr("height",r).attr("x",0).attr("y",0).attr("transform","translate("+[-a/2,-r/2]+")")}app.initImageElement=s,app.chain=t,app.fadeInText=e,app.fadeOutText=n,app.makeFadeIn=i,app.makeFadeOut=a,app.makeDelay=r}(),app.config={"slide-0":{name:"slide-0",title:"slide-0",index:0,posX:0,posY:0,starAnimationDuration:200,logoAnimationDuration:200,textAnimationDuration:0,textOnBoard:"我的运动旅程",basePath:"slides/slide-0"},"slide-1":{name:"slide-1",title:"slide-1",index:1,posX:0,posY:1,subslideDelay:500,subslideDuration:500,basePath:"slides/slide-1"},"slide-2":{name:"slide-2",title:"slide-2",index:2,posX:0,posY:2,textAnimationDuration:1e3,runnerAnimationDuration:1e3,supermanStartX:810,supermanStartY:400,girlStartX:620,girlStartY:320,supermanEndX:670,supermanEndY:270,girlEndX:470,girlEndY:140,startTheta:170,endGirlTheta:-90,endSupermanTheta:-50,basePath:"slides/slide-2"},"slide-3":{name:"slide-3",title:"slide-3",index:3,posX:0,posY:3,basePath:"slides/slide-3"},"slide-4":{name:"slide-4",title:"slide-4",index:4,posX:0,posY:4,rateAnimationDuration:1e3,basePath:"slides/slide-4"},"slide-5":{name:"slide-5",title:"slide-5",index:5,posX:0,posY:5,circleCenterX:700,circleCenterY:600,stepsAccumulateAnimationDuration:1e3,rankCircleAnimationDuration:200,basePath:"slides/slide-5"}},function(t){function e(){var t=10*i,e=this.stars,n=this.logo,a=this.text,r=this.context.basePath;e.transition().duration(0),n.transition().duration(0),a.transition().duration(0),e.style("display","none").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(){return t}).attr("height",function(){return t}).attr("xlink:href",r+"/star.png").attr("transform","translate("+[-t/2,-t/2]+")"),a.attr("transform","translate("+[-600,550]+")")}var n=t.d3,i=32,a=[{x:249,y:316},{x:285,y:309},{x:321,y:302},{x:357,y:295}];t.addSlide("slide-0",{onCreate:function(){var t=parseInt(this.context.starAnimationDuration)||500,i=a.map(function(e,n){return e.delay=n*t,e.duration=t,e});this.stars=n.select("g#slide-0-stars").selectAll("image").data(i).enter().append("image"),this.logo=n.select("#slide-0-logo"),this.text=n.select("g#slide-0-text"),e.call(this)},onEnter:function(){var t=i,e=parseInt(this.context.logoAnimationDuration)||200,a=(parseInt(this.context.textAnimationDuration)||200,0),r=this.ss;this.stars.transition().delay(function(t){return a+=t.duration,t.delay+e}).each(function(){n.select(this).transition().style("display","").duration(function(t){return t.duration}).attr("width",t).attr("height",t).attr("transform","translate("+[-t/2,-t/2]+")")}),this.text.transition().delay(e+a).duration(500).attr("transform","translate("+[190,550]+")").each("end",function(){r.showArrowButton()})},onExit:function(){e.call(this)}})}(app),function(t){function e(t){var e,n=t.split("/"),i=n[n.length-1],a=i.split(".");return a?(e=a[0].split("-"),{width:parseInt(e[e.length-2]),height:parseInt(e[e.length-1]),name:a[0],ext:a[1]}):{}}function n(t,n){var i=e(t),a=i.width,r=i.height,o=n||"";return{"xlink:href":t,id:o+i.name,ext:i.ext,width:a,height:r,x:0,y:0,transform:"translate("+[-a/2,-r/2]+")"}}function i(t,e){return{x:t.x+e.x,y:t.y+e.y}}function a(t){var e=t/180*Math.PI,n={x:S*Math.sin(e),y:-S*Math.cos(e)};return i(T,n)}function r(){g.select(this).attr("id",function(t){return t.id}).attr("transform",function(t){var e=a(t.angle);return"translate("+[e.x,e.y]+")"}).selectAll("g").data(function(t){return t.elements}).enter().append("g").attr("id",function(t){return t.id}).attr("visibility",function(t){return t.visibility?t.visibility:"visible"}).attr("transform",function(t){var e=[];return t.translate&&e.push("translate("+t.translate+")"),t.rotate&&e.push("rotate("+t.rotate+")"),t.scale&&e.push("scale("+t.scale+")"),e.join(" ")}).selectAll("image").data(function(t){return[t.image]}).enter().append("image").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).attr("transform",function(t){return t.transform}).attr("xlink:href",function(t){return t["xlink:href"]})}function o(){return function(t,e){p(),e()}}function s(t,e,n,i){return function(a,r){g.select(t).transition().duration(i).tween("text",function(){var t=this.textContent,i=g.interpolate(t,e),a=(t+"").split("."),r=a.length>1?Math.pow(10,a[1].length):1;return function(t){this.textContent=l(Math.round(i(t)*r)/r,n)}}).each("end",function(){r()})}}function l(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function u(t,e){var n=t.userData.firstday_parsed.year,i=t.userData.firstday_parsed.month,a=t.userData.firstday_parsed.day;x(t,[o(),[s("#slide-1-year",n,4,1e3),s("#slide-1-month",i,2,1e3),s("#slide-1-day",a,2,1e3)],f,y("#slide-1-text-0",300)],e)}function c(t,e){var n=t.userData.dt_10w_parsed.year,i=t.userData.dt_10w_parsed.month,a=t.userData.dt_10w_parsed.day;x(t,[o(),[s("#slide-1-year",n,4,1e3),s("#slide-1-month",i,2,1e3),s("#slide-1-day",a,2,1e3)],h,y("#slide-1-text-1",300)],e)}function d(t,e){var n=t.userData.dt_100w_parsed.year,i=t.userData.dt_100w_parsed.month,a=t.userData.dt_100w_parsed.day;x(t,[o(),[s("#slide-1-year",n,4,1e3),s("#slide-1-month",i,2,1e3),s("#slide-1-day",a,2,1e3)],y("#slide-1-text-2",500)],e)}function h(t,e){g.select("#slide-1-car").transition().duration(1e3).attr("transform","translate(-200, 180)").each("end",function(){e()})}function f(t,e){g.select("#slide-1-0-foot").attr("visibility","visible").transition().duration(200).ease(g.ease("elastic")).attr("transform","translate(-200, 0)").each("end",function(){e()})}function p(){g.selectAll("#slide-1-text g").attr("opacity",0)}function m(t,e){var n=3;g.selectAll("#slide-1-bgs > g").transition().duration(function(t){return t.duration}).attrTween("transform",function(e){var n=e.angle;return function(i){var r;return e.angle=n+t*i,r=a(e.angle),"translate("+[r.x,r.y]+")"}}).each("end",function(){n--,0===n&&"function"==typeof e&&e()})}var g=(t.$,t.d3),x=t.chain,y=t.makeFadeIn,v=t.makeFadeOut,w=t.makeDelay,A=t.config["slide-1"],E=t.config["slide-1"].basePath,D=1600,_=900,b=_/2,T={x:0,y:D},S=D-b,k=[{id:"slide-1-0",elements:[{translate:[0,0],image:n(E+"/sky-900-900.png","slide-1-img-")},{id:"slide-1-0-foot",translate:[-700,0],visibility:"hidden",image:n(E+"/foot-564-360.png","slide-1-img-")}],angle:0,delay:A.subslideDelay||1e3,duration:A.subslideDuration||1e3},{id:"slide-1-1",elements:[{translate:[0,0],image:n(E+"/city-900-900.png","slide-1-img-")},{translate:[0,180],image:n(E+"/road-1080-30.png","slide-1-img-")},{translate:[750,180],id:"slide-1-car",image:n(E+"/car-576-36.png","slide-1-img-")}],angle:90,delay:A.subslideDelay||1e3,duration:A.subslideDuration||1e3},{id:"slide-1-2",elements:[{image:n(E+"/clouds-900-900.png","slide-1-img-"),translate:[0,0]},{image:n(E+"/heart-96-216.png","slide-1-img-"),translate:[60,-150]},{image:n(E+"/monster-258-216.png","slide-1-img-"),translate:[210,0]},{image:n(E+"/aotema-216-216.png","slide-1-img-"),translate:[-80,0]}],angle:180,delay:A.subslideDelay||1e3,duration:A.subslideDuration||1e3}];t.addSlide("slide-1",{onCreate:function(){var t=this.context.userData||{};g.selectAll("g#slide-1-text > g text.ldl-date").data([t.firstday_parsed,t.dt_10w_parsed,t.dt_100w_parsed]).text(function(t){return t.year+"年"+t.month+"月"+t.day+"日"}),g.select("g#slide-1-imgs").append("g").attr("id","slide-1-bgs").selectAll("g").data(k).enter().append("g").each(r),this.animationHandles=[]},onEnter:function(){var t=function(t,e){m(t.angle,e)},e=this.ss,n=this.context.userData.accumulativesteps,i=[u];n>1e5&&(i.push(w(1e3)),i.push(v("#slide-1-text-0",300)),i.push(t),i.push(c)),n>1e6&&(i.push(w(1e3)),i.push(v("#slide-1-text-1",300)),i.push(t),i.push(d)),x({userData:this.context.userData,angle:-90},i,function(){e.showArrowButton()})},onExit:function(){p()}})}(app),function(t){function e(t){var e=t.trim().split("-");return e[0]+"年"+e[1]+"月"+e[2]+"日"}function n(t,e){d(t.textEl,t.textAnimationDuration,function(){e()})}function i(t,e){var n=t.earthAnimationDuration||500;o.select("#slide-2-earth").each(function(){o.select(this.parentNode).transition().duration(n).attr("opacity",1).each("end",function(){e()})})}function a(t,e){var n=t.runnerAnimationDuration||500;o.select("#slide-2-girl").each(function(){o.select(this.parentNode).transition().duration(n).ease(o.ease("elastic",1,.8)).attrTween("transform",function(){var t=s.startTheta,e=s.endGirlTheta,n=e-t;return function(e){var i=t+e*n,a=p(i);return["translate("+a+")","scale("+e+")"].join(" ")}}).each("end",function(){e()})})}function r(t,e){var n=t.runnerAnimationDuration||500;o.select("#slide-2-superman").each(function(){o.select(this.parentNode).transition().duration(n).ease(o.ease("elastic",1,.8)).attrTween("transform",function(){var t=s.startTheta,e=s.endSupermanTheta,n=e-t;return function(e){var i=t+e*n,a=p(i);return["translate("+a+")","scale("+e+")"].join(" ")}}).each("end",function(){e()})})}var o=(t.$,t.d3),s=t.config["slide-2"],l=s.basePath,u=t.initImageElement,c=t.chain,d=(t.makeFadeIn,t.fadeInText),h=[460,470],f=300,p=function(t){var e=h[0],n=h[1],i=f,a=t/180*Math.PI;return[e+i*Math.cos(a),n+i*Math.sin(a)]},m=[{url:l+"/earth-900-900.png",translate:[450,450],opacity:0,scale:1,rotate:0},{url:l+"/girl-114-192.png",translate:p(s.startTheta),scale:0,rotate:0},{url:l+"/superman-156-150.png",translate:p(s.startTheta),scale:0,rotate:0}];t.addSlide("slide-2",{shouldCreate:function(){return this.context&&this.context.userData&&this.context.userData.firstday_running_steps&&this.context.userData.firstday_running_steps>0},onCreate:function(){var t=(this.context.basePath,this.context.userData);o.select("#slide-2-images").selectAll("g").data(m).enter().append("g").attr("transform",function(t){return["translate("+t.translate+")","scale("+t.scale+")"].join(" ")}).attr("opacity",function(t){return"undefined"!=typeof t.opacity?t.opacity:1}).append("image").each(function(t){u(this,t.url,"slide-2-")}),o.select("#slide-2-firstday").text(e(t.firstday)),o.select("#slide-2-firstday-running").text(" "+t.firstday_running_steps+" ")},onEnter:function(){var t={},e=this.ss;t.textEl=this.context.textEl||"#slide-2-text",t.textAnimationDuration=parseInt(this.context.textAnimationDuration)||1e3,c(t,[i,n,a,r],function(){e.showArrowButton()})},onExit:function(){}})}(app),function(t){function e(t){return t.forEach(function(t){t.lineX0=t.x,t.lineY0=t.y,t.lineX1=s.x,t.lineY1=s.y}),t}function n(t){this.uid=o(),this.url=t}function i(t,e,n,i,a){this.id=o(),this.url=t,this.location=e,this.radius=n,this.circleborderWidth=i,this.rayWidth=a}var a=t.$,r=t.d3,o=t.uuid,s={x:464,y:448},l=[{x:700,y:700,circleborderWidth:6,rayWidth:6,radius:120},{x:250,y:150,circleborderWidth:6,rayWidth:6,radius:111},{x:200,y:720,circleborderWidth:3,rayWidth:3,radius:105},{x:600,y:160,circleborderWidth:3,rayWidth:3,radius:90},{x:100,y:500,circleborderWidth:3,rayWidth:3,radius:81}],u="#FF7E00";l=e(l),n.location={x:464,y:448},n.radius=150,n.diameter=2*n.radius,n.prototype.addToDOM=function(t){var e=this.uid,i=n.radius,a=2*i,o=this.url,s=n.location.x,l=n.location.y;r.select(t).append("defs").append("pattern").attr("id",e).attr("x",-i).attr("y",-i).attr("patternUnits","userSpaceOnUse").attr("width",a).attr("height",a).append("image").attr("x",0).attr("x",0).attr("width",a).attr("height",a).attr("xlink:href",o),r.select(t).append("circle").attr("transform","translate("+[s,l]+")").attr("r",i).attr("fill","url(#"+e+")")},n.prototype.compileToHTML=function(){var t={patternId:o(),url:this.url,radius:n.radius,diameter:n.diameter,x:n.location.x,y:n.location.y};return n.template(t)},i.prototype.addToDOM=function(t){var e=this.id,n=o(),i=this.radius,a=2*i,s=this.url,l=this.location.x,c=this.location.y;r.select(t).append("defs").append("pattern").attr("id",n).attr("x",-i).attr("y",-i).attr("patternUnits","userSpaceOnUse").attr("width",a).attr("height",a).append("image").attr("x",0).attr("x",0).attr("width",a).attr("height",a).attr("xlink:href",s),r.select(t).append("circle").attr("id",e).attr("transform","translate("+[l,c]+")").attr("r",0).attr("fill","url(#"+n+")").attr("stroke",u).attr("stroke-width",this.circleborderWidth);var d=460,h=450,f=l-d,p=c-h,m=Math.sqrt(f*f+p*p),g=f/m,x=p/m,y=170,v=d+y*g,w=h+y*x,A=l-i*g,E=c-i*x;r.select(t).append("line").attr("id",this.id+"-line").attr("stroke-width",this.rayWidth).attr("stroke",u).attr("visibility","hidden").attr("x1",v).attr("y1",w).attr("x2",A).attr("y2",E)},i.prototype.compileToHTML=function(){var t={id:this.id,patternId:o(),url:this.url,radius:this.radius,diameter:2*this.radius,x:this.location.x,y:this.location.y};return i.template(t)},i.prototype.present=function(t,e){var n,i=this.id,r=this.radius,o=this.location,s=setTimeout(function(){a("#"+i).css("display","").velocity({translateX:o.x,translateY:o.y},{duration:0}).velocity({r:r},{duration:t,delay:e,easing:[300,20],complete:function(){a("#"+i+"-line").attr("visibility","visible")}})},e);return{stop:function(){clearTimeout(s),clearTimeout(n),a("#"+i).velocity("stop",!0),a("#"+i).css("display","none")}}},t.addSlide("slide-3",{onCreate:function(){var t=this.context&&this.context.userData&&this.context.userData.avatar_url,e=new n(t),o=this.context&&this.context.userData&&this.context.userData.friendsinfo&&this.context.userData.friendsinfo.friendslist||[];this.photosContainer=a("#slide-3-self-photo",this.domEl)[0],e.addToDOM(this.photosContainer),r.select("#slide-3-friends-count").text(" "+this.context.userData.friendsinfo.friends_count+" "),r.select("#slide-3-friends-rank").text(" "+this.context.userData.friendsinfo.friendsrank+" "),this.$summary=a("#slide-3-text-summary",this.domEl),this.$yuepao=a("#slide-3-text-yuepao",this.domEl),this.friendsPhotos=[],o=o.slice(0,5),o.forEach(function(t,e){var n=t.avatar_url,a=new i(n,{x:l[e].x,y:l[e].y},l[e].radius,l[e].circleborderWidth,l[e].rayWidth);a.addToDOM("#slide-3-friend-photos"),this.friendsPhotos.push(a)},this)},onEnter:function(){{var t=this.context.avatarShowDuration||200,e=this.ss;this.context&&this.context.userData&&this.context.userData.friendsinfo&&this.context.userData.friendsinfo.friendslist||[]}a(this.$summary).velocity({opacity:1},{duration:1500}),this.animationHandles=[],this.friendsPhotos.forEach(function(e,n){this.animationHandles.push(e.present(t,t*n))},this),a(this.$yuepao).velocity({opacity:1},{delay:1500,duration:800}),setTimeout(function(){e.showArrowButton()},2300)},onExit:function(){}})}(app),function(t){function e(t){t.forEach(function(t){t.currentAngle=t.startAngle})}function n(t,e){t.forEach(function(t){t.startAngle+=2*(Math.random()-1)*e,t.endAngle+=2*(Math.random()-1)*e})}function i(t){t.reduce(function(t,e){return e.innerRadius=t,e.outerRadius=t+e.width,e.outerRadius},s)}function a(t,e){e/=100,t.forEach(function(t){t.fgEndAngle=t.startAngle+e*(t.endAngle-t.startAngle)})}var r=t.d3,o=[450,425],s=206,l=30,u=15,c=[{startAngle:60,endAngle:290,color:"#1d3689",width:u},{startAngle:60,endAngle:290,color:"#1d3689",width:u},{startAngle:60,endAngle:290,color:"#1d3689",width:u},{startAngle:60,endAngle:290,color:"#0177c1",width:u},{startAngle:60,endAngle:290,color:"#0177c1",width:u},{startAngle:60,endAngle:290,color:"#0177c1",width:u},{startAngle:60,endAngle:290,color:"#73d36c",width:u},{startAngle:60,endAngle:290,color:"#73d36c",width:u},{startAngle:60,endAngle:290,color:"#73d36c",width:u},{startAngle:60,endAngle:290,color:"#30b949",width:u},{startAngle:60,endAngle:290,color:"#30b949",width:u},{startAngle:60,endAngle:290,color:"#30b949",width:2*u}],d=r.svg.arc().startAngle(function(t){return t.startAngle/180*Math.PI}).endAngle(function(t){return t.endAngle/180*Math.PI}).innerRadius(function(t){return t.innerRadius}).outerRadius(function(t){return t.outerRadius}),h=r.svg.arc().startAngle(function(t){return t.startAngle/180*Math.PI}).endAngle(function(t){return t.currentAngle/180*Math.PI}).innerRadius(function(t){return t.innerRadius}).outerRadius(function(t){return t.outerRadius});n(c,l),e(c),i(c),t.addSlide("slide-4",{onCreate:function(){r.select("#slide-4-bg-arcs").selectAll("path").data(c).enter().append("path").attr("d",d).attr("transform","translate("+o+")").attr("fill",function(t){return r.rgb(t.color).darker(3)}),r.select("#slide-4-fg-arcs").selectAll("path").data(c).enter().append("path").attr("d",h).attr("transform","translate("+o+")").attr("fill",function(t){return t.color}),r.select("#slide-4-complete-days").text(" "+this.context.userData.completegoalday+" ")},onEnter:function(){var t=this.context.userData.completegoalrate,e=parseInt(this.context.rateAnimationDuration)||2e3,n=this.ss;a(c,t),r.select("#slide-4-complete-rate").transition().duration(e).tween("text",function(){var e=r.interpolateRound(0,t);return function(t){var n=e(t);this.textContent=10>n?"0"+e(t)+"%":e(t)+"%"}}),r.select("#slide-4-fg-arcs").selectAll("path").data(c).transition().duration(e).attrTween("d",function(t){var e=r.interpolateNumber(t.startAngle,t.fgEndAngle);return function(n){return t.currentAngle=e(n),h(t)}}),r.select("#slide-4-text-summary").transition().delay(e).duration(e).attr("opacity",1),setTimeout(function(){n.showArrowButton()},e+e)},onExit:function(){}})}(app),function(t){function e(t,e,n){function i(){s=function(){}}var a=Date.now(),r=parseInt(t.textContent),o=e-r,s=function(){var l=Date.now(),u=(l-a)/n;u>.99?(t.textContent=""+e,i()):(t.textContent=""+Math.round(r+u*o),requestAnimationFrame(s))};return s(),{stop:i}}function n(t,e,n){return t.velocity({width:e},{duration:n}),{stop:function(){t[0].width=0,t.velocity("stop")}}}function i(t,e,n,i,a,r){return s.select(t).transition().delay(a).duration(r).attr("transform","translate("+[e,n]+") scale("+i+")"),{stop:function(){}}}function a(t,e,n,i){s.select(t).transition().duration(n).delay(i).attr("transform","scale(1.0)").each("end",function(){s.select(e).transition().duration(n).attr("transform","scale(1.0)")})}function r(t,e){var n,i=parseInt(t,10),a="#slide-5-call-me-";return n=/^[fF]/.test(e)?40>=i?4:i>40&&70>=i?0:2:40>=i?5:i>40&&70>=i?1:3,a+n}var o=(t.compile,t.$),s=t.d3;t.addSlide("slide-5",{onCreate:function(){var t=this.context.userData.better_than_pct,e=this.context.userData.gender||"male",n="http://ledongli.cn/";this.totalStepTextEl=o("#slide-5-total-steps")[0],this.avgStepTextEl=o("#slide-5-avg-steps")[0],this.$clipRect=o("#slide-5-bright-map-clip rect"),this.$rankCircle=o("#slide-5-rank-circle"),this.smallFireworkEl="#slide-5-firework-small",this.largeFireworkEl="#slide-5-firework-large",s.select("#slide-5-better-than-pct").text(t),this.pct=t,this.sex=e,s.select("#slide-5-share-btn text").on("click",function(){var t=window.open(n,"_blank");t.focus()}),this.animationHandles=[]},onEnter:function(){var t=this.context.stepsAccumulateAnimationDuration||2e3,o=this.context.rankCircleAnimationDuration||200,l=this.context.fireworkAnimationDuration||200,u=800,c=this.context.userData.accumulativesteps,d=this.context.userData.averagesteps;this.animationHandles.push(e(this.totalStepTextEl,c,t)),this.animationHandles.push(e(this.avgStepTextEl,d,t)),this.animationHandles.push(n(this.$clipRect,u,t)),this.animationHandles.push(a(this.smallFireworkEl,this.largeFireworkEl,l,t)),this.animationHandles.push(i(this.$rankCircle[0],this.context.circleCenterX,this.context.circleCenterY,1,t+2*l,o)),s.select(r(this.pct,this.sex)).transition().duration(500).delay(o+t+2*l).attr("transform","scale(1.0)")
},onExit:function(){this.animationHandles.forEach(function(t){t.stop()})}})}(app),app.bootstrap();</script></body></html>